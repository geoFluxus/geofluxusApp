<!DOCTYPE html>
  <html>
  <head>
    <meta charset=utf-8 />
    <title>Esri Leaflet Debugging Sample</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

    <!-- Load Leaflet -->
    <link rel="stylesheet" href="../node_modules/leaflet/dist/leaflet.css" />
    <script src="../node_modules/leaflet/dist/leaflet-src.js"></script>

    <!-- Load Esri Leaflet from source-->
    <script src="../dist/esri-leaflet-debug.js"></script>

    <style>
      body {
        margin:0;
        padding:0;
      }

      #map {
        position: absolute;
        top:0;
        bottom:0;
        right:0;left:0;
      }

      #info-pane {
        position: absolute;
        top: 10px;
        right: 10px;
        z-index: 1000;
        padding: 1em;
        background: white;
      }
    </style>
  </head>
  <body>

  <div id="map"></div>
  <div id="info-pane" class="leaflet-bar">
    <label>
    sample application for debugging
    </label>
  </div>

  <script>
    var features = [{
      type: 'Feature',
      id: 1,
      geometry: {
        type: 'LineString',
        coordinates: [[-122, 45], [-121, 40]]
      },
      properties: {
        time: new Date('January 1 2014').valueOf(),
        type: 'good'
      }
    }, {
      type: 'Feature',
      id: 2,
      geometry: {
        type: 'LineString',
        coordinates: [[-123, 46], [-120, 45]]
      },
      properties: {
        time: new Date('Febuary 1 2014').valueOf(),
        type: 'bad'
      }
    }];

    var map = L.map('map').setView([45.528, -122.680], 7);
    L.esri.basemapLayer("Gray").addTo(map);

    var l = L.esri.featureLayer({
      url: "https://sampleserver6.arcgisonline.com/arcgis/rest/services/911CallsHotspot/MapServer/1",
      where: "OBJECTID=999"
    }).addTo(map);

    l.on('addfeature', function (e) {
      console.log('added ' + e.feature.id);
    });

    l.on('removefeature', function (e) {
      console.log('removed ' + e.feature.id);
    });

    l.createLayers(features);
    l.addLayers(features);

    l.removeLayers([1]);
    l.addLayers([1]);


      // setTimeout(function(){
      //   // setup handlers
      //   // l.on('addfeature', function(obj){
      //   //     console.log('add', obj.feature.properties.OBJECTID);
      //   // }, this);
      //   // l.on('removefeature', function(obj){
      //   //     console.log('remove', obj.feature.properties.OBJECTID);
      //   // }, this);
      //   // set new where clause
      //   l.setWhere("OBJECTID = 134");
      // }, 5000);
      // setTimeout(function(){
      //   // set new where clause
      //   l.setWhere("OBJECTID = 13");
      // }, 10000);
  </script>

  </body>
  </html>