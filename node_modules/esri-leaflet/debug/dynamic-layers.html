<!DOCTYPE html>
  <html>
  <head>
    <meta charset=utf-8 />
    <title>Esri Leaflet Debugging Sample</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

    <!-- Load Leaflet from CDN-->
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
    <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>

    <!-- Load Esri Leaflet from source-->
    <script src="../src/EsriLeaflet.js"></script>
    <script src="../src/Request.js"></script>
    <script src="../src/Util.js"></script>
    <script src="../src/Controls/Logo.js"></script>

    <script src="../src/Services/Service.js"></script>
    <script src="../src/Services/FeatureLayer.js"></script>
    <script src="../src/Services/ImageService.js"></script>
    <script src="../src/Services/MapService.js"></script>

    <script src="../src/Layers/FeatureLayer/FeatureGrid.js"></script>
    <script src="../src/Layers/FeatureLayer/FeatureManager.js"></script>
    <script src="../src/Layers/FeatureLayer/FeatureLayer.js"></script>

    <script src="../src/Layers/RasterLayer.js"></script>
    <script src="../src/Layers/ImageMapLayer.js"></script>
    <script src="../src/Layers/TiledMapLayer.js"></script>
    <script src="../src/Layers/BasemapLayer.js"></script>
    <script src="../src/Layers/DynamicMapLayer.js"></script>

    <script src="../src/Tasks/Task.js"></script>
    <script src="../src/Tasks/Find.js"></script>
    <script src="../src/Tasks/Identify.js"></script>
    <script src="../src/Tasks/IdentifyFeatures.js"></script>
    <script src="../src/Tasks/IdentifyImage.js"></script>
    <script src="../src/Tasks/Query.js"></script>

    <style>
      body {
        margin:0;
        padding:0;
      }

      #map {
        position: absolute;
        top:0;
        bottom:0;
        right:0;left:0;
      }

      #info-pane {
        position: absolute;
        top: 10px;
        right: 10px;
        z-index: 10;
        padding: 1em;
        background: white;
      }
    </style>
  </head>
  <body>

  <div id="map"></div>
  <div id="info-pane" class="leaflet-bar">
    <label>
    sample application for debugging
    </label>
  </div>

  <script>
    /*
    [{"id":2,"name":"Detailed Counties","source":{"type":"mapLayer","mapLayerId":2},"drawingInfo":{"renderer":{"type":"classBreaks","field":"POP2007","minValue":-99,"classBreakInfos":[{"classMaxValue":219570,"label":"-99 - 219570","description":"","symbol":{"color":[255,255,204,255],"type":"esriSFS","style":"esriSFSSolid"}},{"classMaxValue":754115,"label":"219571 - 754115","description":"","symbol":{"color":[184,217,130,255],"type":"esriSFS","style":"esriSFSSolid"}},{"classMaxValue":2100707,"label":"754116 - 2100707","description":"","symbol":{"color":[97,179,72,255],"type":"esriSFS","style":"esriSFSSolid"}},{"classMaxValue":5407427,"label":"2100708 - 5407427","description":"","symbol":{"color":[28,142,45,255],"type":"esriSFS","style":"esriSFSSolid"}},{"classMaxValue":10110975,"label":"5407428 - 10110975","description":"","symbol":{"color":[0,104,55,255],"type":"esriSFS","style":"esriSFSSolid"}}],"classificationMethod":"esriClassifyNaturalBreaks"}},"minScale":0,"maxScale":0}]
    */

    var map = L.map('map').setView([40, -100], 5);
    L.esri.basemapLayer('Topographic').addTo(map);

    var dyn = L.esri.dynamicMapLayer('http://sampleserver6.arcgisonline.com/arcgis/rest/services/Census/MapServer', {
      opacity: 0.5,
      dynamicLayers: '[{"id":2,"name":"Detailed Counties","source":{"type":"mapLayer","mapLayerId":2},"drawingInfo":{"renderer":{"type":"classBreaks","field":"POP2007","minValue":-99,"classBreakInfos":[{"classMaxValue":219570,"label":"-99 - 219570","description":"","symbol":{"color":[255,255,204,255],"type":"esriSFS","style":"esriSFSSolid"}},{"classMaxValue":754115,"label":"219571 - 754115","description":"","symbol":{"color":[184,217,130,255],"type":"esriSFS","style":"esriSFSSolid"}},{"classMaxValue":2100707,"label":"754116 - 2100707","description":"","symbol":{"color":[97,179,72,255],"type":"esriSFS","style":"esriSFSSolid"}},{"classMaxValue":5407427,"label":"2100708 - 5407427","description":"","symbol":{"color":[28,142,45,255],"type":"esriSFS","style":"esriSFSSolid"}},{"classMaxValue":10110975,"label":"5407428 - 10110975","description":"","symbol":{"color":[0,104,55,255],"type":"esriSFS","style":"esriSFSSolid"}}],"classificationMethod":"esriClassifyNaturalBreaks"}},"minScale":0,"maxScale":0}]'
    }).addTo(map);

    console.log(dyn.getDynamicLayers());
    /*
    dyn.setDynamicLayers('[{"id":2,"name":"Detailed Counties","source":{"type":"mapLayer","mapLayerId":2},"drawingInfo":{"renderer":{"type":"classBreaks","field":"POP2007","minValue":-99,"classBreakInfos":[{"classMaxValue":219570,"label":"-99 - 219570","description":"","symbol":{"color":[255,255,204,255],"type":"esriSFS","style":"esriSFSSolid"}},{"classMaxValue":754115,"label":"219571 - 754115","description":"","symbol":{"color":[184,217,130,255],"type":"esriSFS","style":"esriSFSSolid"}},{"classMaxValue":2100707,"label":"754116 - 2100707","description":"","symbol":{"color":[97,179,72,255],"type":"esriSFS","style":"esriSFSSolid"}},{"classMaxValue":5407427,"label":"2100708 - 5407427","description":"","symbol":{"color":[28,142,45,255],"type":"esriSFS","style":"esriSFSSolid"}},{"classMaxValue":10110975,"label":"5407428 - 10110975","description":"","symbol":{"color":[0,104,55,255],"type":"esriSFS","style":"esriSFSSolid"}}],"classificationMethod":"esriClassifyNaturalBreaks"}},"minScale":0,"maxScale":0}]');
    */
  </script>

  </body>
  </html>