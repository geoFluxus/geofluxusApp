<!DOCTYPE html>
  <html>
  <head>
    <meta charset=utf-8 />
    <title>zoom to bounds</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

    <!-- Load Leaflet from CDN-->
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
    <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>

    <!-- Load Esri Leaflet from CDN -->
    <!-- we encourage you to replace 'latest' with a hardcode version number (like '1.0.0-rc.7') in production applications -->
    <script src="http://cdn.jsdelivr.net/leaflet.esri/1.0.0-rc.8/esri-leaflet.js"></script>

    <!-- Load Esri Leaflet from source-->
    <script src="../src/EsriLeaflet.js"></script>
    <script src="../src/Request.js"></script>
    <script src="../src/Util.js"></script>
    <script src="../src/Controls/Logo.js"></script>

    <script src="../src/Services/Service.js"></script>
    <script src="../src/Services/FeatureLayer.js"></script>
    <script src="../src/Services/ImageService.js"></script>
    <script src="../src/Services/MapService.js"></script>

    <script src="../src/Layers/FeatureLayer/FeatureGrid.js"></script>
    <script src="../src/Layers/FeatureLayer/FeatureManager.js"></script>
    <script src="../src/Layers/FeatureLayer/FeatureLayer.js"></script>

    <script src="../src/Layers/RasterLayer.js"></script>
    <script src="../src/Layers/ImageMapLayer.js"></script>
    <script src="../src/Layers/TiledMapLayer.js"></script>
    <script src="../src/Layers/BasemapLayer.js"></script>
    <script src="../src/Layers/DynamicMapLayer.js"></script>

    <script src="../src/Tasks/Task.js"></script>
    <script src="../src/Tasks/Find.js"></script>
    <script src="../src/Tasks/Identify.js"></script>
    <script src="../src/Tasks/IdentifyFeatures.js"></script>
    <script src="../src/Tasks/IdentifyImage.js"></script>
    <script src="../src/Tasks/Query.js"></script>

    <style>
      body {
        margin:0;
        padding:0;
      }

      #map {
        position: absolute;
        top:0;
        bottom:0;
        right:0;left:0;
      }

      #info-pane {
        position: absolute;
        top: 10px;
        right: 10px;
        z-index: 10;
        padding: 1em;
        background: white;
      }
    </style>
  </head>
  <body>

  <div id="map"></div>
  <div id="info-pane" class="leaflet-bar">
    <label>
    zoom to the bounds of features in a featureLayer
    </label>
  </div>

  <script>

    // create a map and add Esri's Dark Gray basemap
    var map = L.map('map').setView([40, -100], 5);
    L.esri.basemapLayer('DarkGray').addTo(map);

    // add a graphic layer composed of selected US Counties
    var fl = L.esri.featureLayer('http://sampleserver6.arcgisonline.com/arcgis/rest/services/Census/MapServer/2', {
      where: "NAME='Los Angeles' OR NAME='San Bernardino'"
    }).addTo(map);

    // listen for when all features have been retrieved from the server
    fl.on("load", function(evt) {
      // create a new empty Leaflet bounds object
      var bounds = L.latLngBounds([]);
      // loop through the features returned by the server
      fl.eachFeature(function(layer) {
        // get the bounds of an individual feature
        var layerBounds = layer.getBounds();
        // extend the bounds of the collection to fit the bounds of the new feature
        bounds.extend(layerBounds);
      });

      // once we've looped through all the features, zoom the map to the extent of the collection
      map.fitBounds(bounds);

      // unwire the event listener so that it only fires once when the page is loaded
      fl.off('load');
    });

  </script>

  </body>
  </html>