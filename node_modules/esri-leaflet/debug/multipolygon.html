<!DOCTYPE html>
  <html>
  <head>
    <meta charset=utf-8 />
    <title>Esri Leaflet Debugging Sample</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

    <!-- Load Leaflet -->
    <link rel="stylesheet" href="../node_modules/leaflet/dist/leaflet.css" />
    <script src="../node_modules/leaflet/dist/leaflet-src.js"></script>

    <!-- Load Esri Leaflet from source-->
    <script src="../dist/esri-leaflet-debug.js"></script>

    <style>
      body {
        margin:0;
        padding:0;
      }

      #map {
        position: absolute;
        top:0;
        bottom:0;
        right:0;left:0;
      }

      #info-pane {
        position: absolute;
        top: 10px;
        right: 10px;
        z-index: 1000;
        padding: 1em;
        background: white;
      }
    </style>
  </head>
  <body>

  <div id="map"></div>
  <div id="info-pane" class="leaflet-bar">
    <label>
    multipolygon queries
    </label>
  </div>

  <script>

  // ne -118.135, 33.525
  // sw -118.792, 33.239

  var bbox = {
    "type": "Polygon",
    "coordinates": [
      [
        [-118.135, 33.525],
        [-118.792, 33.525],
        [-118.792, 33.239],
        [-118.135, 33.239],
        [-118.135, 33.525]
      ]
    ]
  }

  var hole = {
    "type": "MultiPolygon",
    "coordinates": [
      [[
        [-118.035, 33.625],
        [-118.892, 33.625],
        [-118.892, 33.139],
        [-118.035, 33.139],
        [-118.035, 33.625]
      ]],
      [[
        [-118.135, 33.525],
        [-118.792, 33.525],
        [-118.792, 33.239],
        [-118.135, 33.239],
        [-118.135, 33.525]
      ]]
    ]
  }

  var rawGeoJsonMultiPolygon = {
    'type': 'MultiPolygon',
    'coordinates': [
      [[[-97, 39], [-97, 41], [-94, 41], [-94, 39], [-97, 39]]],
      [[[-96, 39.5], [-96, 40.5], [-95, 40.5], [-95, 39.5], [-96, 39.5]]]
    ]
  };

var map = L.map("map").setView([33.55, -118.3], 10);
L.esri.basemapLayer("Topographic").addTo(map);

L.geoJSON(hole).addTo(map);

L.esri.query({
  url:'http://sampleserver6.arcgisonline.com/arcgis/rest/services/Census/MapServer/3'
})
  .intersects(hole)
  .run(function (err, res, raw) {
    console.log(res.features.length);
  })
  </script>

  </body>
  </html>