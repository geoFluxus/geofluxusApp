<!--Filters-->
<script type="text/template" id="filter-template">

    <div class="block accordion" id="filterBlock">

        <div class="row justify-content-between">
            <h4 class="pb-1 pl-3">Step 1: Filter the flows</h4>

            <div>
                <button
                    id='view-saved-filters'
                    class="btn btn-outline-primary openSavedFilterModal"
                    data-filter-modal-mode="savedMode"
                    title="View and set a saved filter configuration."
                    style="height: 38px; width: 6em">SAVED</button>

                <button
                    id='save-filters'
                    class="btn btn-outline-primary openSavedFilterModal"
                    data-filter-modal-mode="newMode"
                    title="Save the current filter configuration."
                    style="height: 38px; width: 6em">NEW</button>
            </div>
        </div>

        <!-- ORIGIN CONTROLS -->
        <div class="card bg-dark">
            <div class="card-header" id="card-header-collapse-origin">
                <h4 class="mb-1">
                    <button class="btn btn-link collapsingHeaderButton" id="btn-collapse-header-origin"
                        data-toggle="collapse" data-target="#collapseOriginBlock" aria-expanded="true"
                        aria-controls="collapseOriginBlock"
                        title="The filters related to the Origin of the waste flow.">
                        <i class="fa fa-chevron-down pull-right"></i>
                        Origin
                    </button>
                </h4>
            </div>

            <div id="collapseOriginBlock" class="collapse show" aria-labelledby="card-header-collapse-origin"
                data-parent="#filterBlock">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-10">

                            <label for="area-select-button-origin">Limit the <strong>origin</strong> of the waste flows
                                to geographic
                                areas:</label>

                            <div class="d-block">
                                <button id="area-select-button-origin" class="btn btn-sm btn-primary area-select-button"
                                    data-width="100%" style="width: 13em" data-area-select-block="origin">Select areas
                                </button>

                                <div class="d-inline buttonHelpiconContainer">
                                    <a class="help-icon fas fa-question-circle" data-toggle="popover"
                                        title="Select areas" data-html="true" tabindex="0"
                                        data-content="Clicking the <b>Select areas</b> button opens a dialog in which you can select one or more geographic areas.<br> The selected areas will be used to filter the waste flows based on the coordinates of the Origin of the waste flow.">
                                    </a>
                                </div>
                            </div>

                        </div>
                    </div>

                    <div class='row areaSelectionsOrigin' style="display: none;">
                        <div class="col-md-4">

                            <textarea class="form-control-sm textarea-autosize selections"
                                id="areaSelectionsOriginTextarea" style="width: 100% !important; display: inline-block"
                                type="text" readonly></textarea>

                            <button id="clear-origin-areas-button" class="btn btn-sm btn-primary clear-areas-button"
                                title="Clear the selected areas." data-area-clear-button="origin">
                                <i class="fas fa-times"></i>
                            </button>

                        </div>
                    </div>

                    <div class="row mt-2 areaSelectionsOrigin" style="display: none;">
                        <div class="col">
                            <div style="display: block;">
                                <label style="display: inline-block;">The origin of the flows must be</label>
                                <div class="checkbox in-or-out-container">
                                    <input name="in-or-out-origin" id="origin-area-in-or-out" type="checkbox"
                                        data-height="24" data-toggle="toggle" data-on="outside" data-off="within"
                                        class="in-out-toggle bootstrapToggle">
                                    <label style="display: inline-block;">the selected area(s).</label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="col-md-12">

                            <label for="origin-role-radio">Origin role</label>

                            <div>
                                <div class="btn-group btn-group-toggle" id="origin-role-radio" data-toggle="buttons"
                                    style="width: 18rem;">

                                    <label class="btn btn-sm btn-primary" style="width: 40%;">
                                        <input type="radio" id="origin-role-radio-production" checked>Production
                                    </label>
                                    <label class="btn btn-sm btn-primary active" style="width: 20%;">
                                        <input type="radio" id="origin-role-radio-both">Both
                                    </label>
                                    <label class="btn btn-sm btn-primary" style="width: 40%;">
                                        <input type="radio" id="origin-role-radio-treatment">Treatment
                                    </label>

                                </div>

                                <div class="d-inline buttonHelpiconContainer">
                                    <a class="help-icon fas fa-question-circle" data-toggle="popover"
                                        title="Origin role" data-html="true" tabindex="0"
                                        data-content="Choose the role of the Origin of the waste flow: waste production, waste treatment, or both.<br>
                                            If you select waste production, the filters for economic activities will appear. 
                                            If you choose waste treatment, the filters for the different waste treatment methods will become available.">
                                    </a>
                                </div>

                            </div>


                        </div>
                    </div>

                    <div class="row originContainerActivity" style="display: none;">
                        <div class="col-md-4">

                            <label for="origin-activitygroup-select">Activity group</label>
                            <div class="labelHelpiconContainer">
                                <a class="help-icon fas fa-question-circle" data-toggle="popover" title="Activity group"
                                    data-html="true" tabindex="0" data-content="
                                    <span>The Activity group indicates the economic activity of the Origin of the waste flow.</span>
                                    <br>
                                    <span>This classification is based on the Statistical Classification of Economic Activities in the European Community, 
                                    also known as NACE Rev. 2. The full list of entries can be consulted <a href='https://ec.europa.eu/eurostat/ramon/nomenclatures/index.cfm?TargetUrl=LST_NOM_DTL&StrNom=NACE_REV2&StrLanguageCode=EN&IntPcKey=&StrLayoutCode=HIERARCHIC'>here</a>.</span>
                                    <br>
                                    <span>This filter also contains four additional custom entries:</span>
                                    <ul>
                                        <li>V - Onbekend</li>
                                        <li>WT - Unknown waste treatment</li>
                                        <li>WU - Unknown</li>
                                        <li>X - Route inzameling</li>
                                    </ul>
                                    <span>Upon selecting an Activity group, the Activity filter will become available, containing the Activities belonging to the selection made in this filter.</span>
                                    ">
                                </a>
                            </div>

                            <select id="origin-activitygroup-select" name="origin-activitygroup-select" multiple
                                class="form-control form-control-sm selectpicker" data-live-search="true"
                                data-dropup-auto="false" data-size="6" style="resize: vertical;">
                                <option selected value="-1">All (<%= activityGroups.count %>)</option>
                                <option data-divider="true"></option>
                                <% activityGroups.forEach(function(activitygroup){ %>
                                <option value="<%= activitygroup.id %>"><%=(activitygroup.get('code'))%>
                                    <%= activitygroup.get('name')[0].toUpperCase() + activitygroup.get('name').slice(1).toLowerCase() %>
                                </option>
                                <% }); %>
                            </select>
                        </div>

                        <div class="col-md-4 activitySelectContainer activitySelectContainerOrigin"
                            style="display: none">

                            <label for="origin-activity-select">Activity</label>
                            <div class="labelHelpiconContainer">
                                <a class="help-icon fas fa-question-circle" data-toggle="popover" title="Activity"
                                    data-html="true" tabindex="0" data-content="
                                    <span>The Activity indicates the economic activity of the Origin of the waste flow on the most detailed level.
                                    This filter contains the Activities belonging to the selection made in the Activity group filter.</span>
                                    <br>
                                    <span>This classification is based on the Statistical Classification of Economic Activities in the European Community, 
                                    also known as NACE Rev. 2. The full list of entries can be consulted <a href='https://ec.europa.eu/eurostat/ramon/nomenclatures/index.cfm?TargetUrl=LST_NOM_DTL_LINEAR&StrNom=NACE_REV2&StrLanguageCode=EN'>here</a>.</span>
                                    <br>
                                    <span>This filter also contains several additional custom entries belonging to the custom Activity groups.</span>
                                    ">
                                </a>
                            </div>

                            <i class="fas fa-angle-double-right filterDoubleChevron"></i>
                            <select id="origin-activity-select" name="origin-activity-select" multiple
                                class="form-control form-control-sm selectpicker" data-live-search="true"
                                data-dropup-auto="false" data-size="6" style="resize: vertical;">
                            </select>
                        </div>
                    </div>

                    <div class="row originContainerTreatmentMethod" style="display: none;">
                        <div class="col-md-4">

                            <label for="origin-processGroup-select">Treatment method group</label>
                            <div class="labelHelpiconContainer">
                                <a class="help-icon fas fa-question-circle" data-toggle="popover"
                                    title="Treatment method group" data-html="true" tabindex="0" data-content="
                                    <span>The Treatment method group indicates the general treatment method group used by the Origin of the flows.</span>
                                    <br>
                                    <span>This classification is based on the classification system of the Dutch government agency 'Landelijk Meldpunt Afvalstoffen'.
                                    The full list of entries can be consulted <a href='https://www.lma.nl/faq/nummers-codes/verwerkingsmethode/'>here</a>.</span>
                                    <br>
                                    <span>Upon selecting a Treatment method group, the Treatment method filter will become available, containing the Treatment methods belonging to the selection made in this filter.</span>
                                    ">
                                </a>
                            </div>

                            <select name="origin-processGroup-select" id="origin-processGroup-select" multiple
                                class="form-control form-control-sm selectpicker" data-live-search="true" data-size="6"
                                style="resize: vertical;">
                                <option selected value="-1">All (<%= processgroups.count %>)</option>
                                <option data-divider="true"></option>
                                <% processgroups.forEach(function(process){ %>
                                <option value="<%= process.id %>"><%= process.get('code') %>
                                    <%= process.get('name')[0].toUpperCase() + process.get('name').slice(1).toLowerCase() %>
                                </option>
                                <% }); %>
                            </select>
                        </div>

                        <div class="col-md-4" id="originContainerProcesses" style="display: none;">

                            <label for="origin-process-select">Treatment method</label>
                            <div class="labelHelpiconContainer">
                                <a class="help-icon fas fa-question-circle" data-toggle="popover"
                                    title="Treatment method" data-html="true" tabindex="0" data-content="
                                    <span>The Treatment method indicates the specific treatment method used by the Origin of the flows.</span>
                                    <br>
                                    <span>This classification is based on the classification system of the Dutch government agency 'Landelijk Meldpunt Afvalstoffen'.
                                    The full list of entries can be consulted <a href='https://www.lma.nl/faq/nummers-codes/verwerkingsmethode/'>here</a>.</span>
                                    ">
                                </a>
                            </div>


                            <i class="fas fa-angle-double-right filterDoubleChevron"></i>
                            <select name="origin-process-select" id="origin-process-select" multiple
                                class="form-control form-control-sm selectpicker" data-live-search="true" data-size="6"
                                style="resize: vertical;">
                            </select>
                        </div>


                    </div>

                </div>
            </div>

        </div>

        <!-- DESTINATION CONTROLS -->
        <div class="card bg-dark">
            <div class="card-header" id="card-header-collapse-destination">
                <h4 class="mb-1">
                    <button class="btn btn-link collapsed collapsingHeaderButton" id="btn-collapse-header-destination"
                        data-toggle="collapse" data-target="#collapseDestinationBlock" aria-expanded="false"
                        aria-controls="collapseDestinationBlock"
                        title="The filters related to the Destination of the waste flow.">
                        <i class="fa fa-chevron-down pull-right"></i>
                        Destination
                    </button>
                </h4>
            </div>

            <div id="collapseDestinationBlock" class="collapse" aria-labelledby="card-header-collapse-destination"
                data-parent="#filterBlock">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-10">

                            <label for="area-select-button-destination">Limit the <strong>destination</strong> of the
                                waste flows to
                                geographic areas:</label>

                            <div class="d-block">
                                <button id="area-select-button-destination"
                                    class="btn btn-sm btn-primary area-select-button" data-width="100%"
                                    style="width: 13em" data-area-select-block="destination">Select areas
                                </button>

                                <div class="d-inline buttonHelpiconContainer">
                                    <a class="help-icon fas fa-question-circle" data-toggle="popover"
                                        title="Select areas" data-html="true" tabindex="0"
                                        data-content="Clicking the <b>Select areas</b> button opens a dialog in which you can select one or more geographic areas.<br> The selected areas will be used to filter the waste flows based on the coordinates of the Destination of the waste flow.">
                                    </a>
                                </div>
                            </div>

                        </div>
                    </div>

                    <div class='row areaSelectionsDestination' style="display: none;">
                        <div class="col-md-4">

                            <textarea class="form-control-sm textarea-autosize selections"
                                id="areaSelectionsDestinationTextarea"
                                style="width: 100% !important; display: inline-block" type="text" readonly></textarea>

                            <button id="clear-destination-areas-button"
                                class="btn btn-sm btn-primary clear-areas-button" data-area-clear-button="destination"
                                title="Clear the selected areas.">
                                <i class="fas fa-times"></i>
                            </button>

                        </div>
                    </div>
                    <div class="row mt-2 areaSelectionsDestination" style="display: none;">
                        <div class="col">
                            <div style="display: block;">
                                <label style="display: inline-block;">The destination of the flows must be</label>
                                <div class="checkbox in-or-out-container">
                                    <input name="in-or-out-destination" id="destination-area-in-or-out" type="checkbox"
                                        data-height="24" data-toggle="toggle" data-on="outside" data-off="within"
                                        class="in-out-toggle bootstrapToggle">
                                    <label style="display: inline-block;">the selected area(s).</label>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="row mt-4">
                        <div class="col-md-12">

                            <label for="destination-role-radio">Destination role</label>

                            <div>
                                <div class="btn-group btn-group-toggle" id="destination-role-radio"
                                    data-toggle="buttons" style="width: 18rem;">

                                    <label class="btn btn-sm btn-primary" style="width: 40%;">
                                        <input type="radio" id="destination-role-radio-production" checked>Production
                                    </label>
                                    <label class="btn btn-sm btn-primary active" style="width: 20%;">
                                        <input type="radio" id="destination-role-radio-both">Both
                                    </label>
                                    <label class="btn btn-sm btn-primary" style="width: 40%;">
                                        <input type="radio" id="destination-role-radio-treatment">Treatment
                                    </label>

                                </div>

                                <div class="d-inline buttonHelpiconContainer">
                                    <a class="help-icon fas fa-question-circle" data-toggle="popover"
                                        title="Origin role" data-html="true" tabindex="0"
                                        data-content="Choose the role of the Destination of the waste flow: waste production, waste treatment, or both.<br>
                                                If you select waste production, the filters for economic activities will appear. 
                                                If you choose waste treatment, the filters for the different waste treatment methods will become available.">
                                    </a>
                                </div>

                            </div>

                        </div>
                    </div>

                    <div class="row destinationContainerActivity" style="display: none;">
                        <div class="col-md-4">
                            <label for="destination-activitygroup-select">Activity group</label>
                            <div class="labelHelpiconContainer">
                                <a class="help-icon fas fa-question-circle" data-toggle="popover" title="Activity group"
                                    data-html="true" tabindex="0" data-content="
                                    <span>The Activity group indicates the economic activity of the Destination of the waste flow.</span>
                                    <br>
                                    <span>This classification is based on the Statistical Classification of Economic Activities in the European Community, 
                                    also known as NACE Rev. 2. The full list of entries can be consulted <a href='https://ec.europa.eu/eurostat/ramon/nomenclatures/index.cfm?TargetUrl=LST_NOM_DTL&StrNom=NACE_REV2&StrLanguageCode=EN&IntPcKey=&StrLayoutCode=HIERARCHIC'>here</a>.</span>
                                    <br>
                                    <span>This filter also contains four additional custom entries:</span>
                                    <ul>
                                        <li>V - Onbekend</li>
                                        <li>WT - Unknown waste treatment</li>
                                        <li>WU - Unknown</li>
                                        <li>X - Route inzameling</li>
                                    </ul>
                                    <span>Upon selecting an Activity group, the Activity filter will become available, containing the Activities belonging to the selection made in this filter.</span>
                                    ">
                                </a>
                            </div>


                            <select id="destination-activitygroup-select" name="destination-activitygroup-select"
                                multiple class="form-control form-control-sm selectpicker" data-live-search="true"
                                data-dropup-auto="false" data-size="6" style="resize: vertical;">
                                <option selected value="-1">All (<%= activityGroups.count %>)</option>
                                <option data-divider="true"></option>
                                <% activityGroups.forEach(function(activitygroup){ %>
                                <option value="<%= activitygroup.id %>"><%=(activitygroup.get('code'))%>
                                    <%= activitygroup.get('name')[0].toUpperCase() + activitygroup.get('name').slice(1).toLowerCase() %>
                                </option>
                                <% }); %>
                            </select>
                        </div>
                        <div class="col-md-4 activitySelectContainer activitySelectContainerDestination"
                            style="display: none">
                            <label for="destination-activity-select">Activity</label>
                            <div class="labelHelpiconContainer">
                                <a class="help-icon fas fa-question-circle" data-toggle="popover" title="Activity"
                                    data-html="true" tabindex="0" data-content="
                                    <span>The Activity indicates the economic activity of the Destination of the waste flow  on the most detailed level.
                                    This filter contains the Activities belonging to the selection made in the Activity group filter.</span>
                                    <br>
                                    <span>This classification is based on the Statistical Classification of Economic Activities in the European Community, 
                                    also known as NACE Rev. 2. The full list of entries can be consulted <a href='https://ec.europa.eu/eurostat/ramon/nomenclatures/index.cfm?TargetUrl=LST_NOM_DTL_LINEAR&StrNom=NACE_REV2&StrLanguageCode=EN'>here</a>.</span>
                                    <br>
                                    <span>This filter also contains several additional custom entries belonging to the custom Activity groups.</span>
                                    ">
                                </a>
                            </div>

                            <i class="fas fa-angle-double-right filterDoubleChevron"></i>
                            <select id="destination-activity-select" name="destination-activity-select" multiple
                                class="form-control form-control-sm selectpicker" data-live-search="true"
                                data-dropup-auto="false" data-size="6" style="resize: vertical;">
                            </select>
                        </div>
                    </div>

                    <div class="row destinationContainerTreatmentMethod" style="display: none;">
                        <div class="col-md-4">

                            <label for="destination-processGroup-select">Treatment method group</label>
                            <div class="labelHelpiconContainer">
                                <a class="help-icon fas fa-question-circle" data-toggle="popover"
                                    title="Treatment method group" data-html="true" tabindex="0" data-content="
                                    <span>The Treatment method group indicates the general treatment method group used by the Destination of the flows.</span>
                                    <br>
                                    <span>This classification is based on the classification system of the Dutch government agency 'Landelijk Meldpunt Afvalstoffen'.
                                    The full list of entries can be consulted <a href='https://www.lma.nl/faq/nummers-codes/verwerkingsmethode/'>here</a>.</span>
                                    <br>
                                    <span>Upon selecting a Treatment method group, the Treatment method filter will become available, containing the Treatment methods belonging to the selection made in this filter.</span>
                                    ">
                                </a>
                            </div>

                            <select name="destination-processGroup-select" id="destination-processGroup-select" multiple
                                class="form-control form-control-sm selectpicker" data-live-search="true" data-size="6"
                                style="resize: vertical;">
                                <option selected value="-1">All (<%= processgroups.count %>)</option>
                                <option data-divider="true"></option>
                                <% processgroups.forEach(function(process){ %>
                                <option value="<%= process.id %>"><%= process.get('code') %>
                                    <%= process.get('name')[0].toUpperCase() + process.get('name').slice(1).toLowerCase() %>
                                </option>
                                <% }); %>
                            </select>
                        </div>

                        <div class="col-md-4" id="destinationContainerProcesses" style="display: none;">

                            <label for="destination-process-select">Treatment method</label>
                            <div class="labelHelpiconContainer">
                                <a class="help-icon fas fa-question-circle" data-toggle="popover"
                                    title="Treatment method" data-html="true" tabindex="0" data-content="
                                    <span>The Treatment method indicates the specific treatment method used by the Destination of the flows.</span>
                                    <br>
                                    <span>This classification is based on the classification system of the Dutch government agency 'Landelijk Meldpunt Afvalstoffen'.
                                    The full list of entries can be consulted <a href='https://www.lma.nl/faq/nummers-codes/verwerkingsmethode/'>here</a>.</span>
                                    ">
                                </a>
                            </div>

                            <i class="fas fa-angle-double-right filterDoubleChevron"></i>
                            <select name="destination-process-select" id="destination-process-select" multiple
                                class="form-control form-control-sm selectpicker" data-live-search="true" data-size="6"
                                style="resize: vertical;">
                            </select>
                        </div>
                    </div>

                </div>
            </div>

        </div>

        <!-- FLOWS CONTROLS -->
        <div class="card bg-dark"
            style="border-bottom-left-radius: 30px !important; border-bottom-right-radius: 30px !important">
            <div class="card-header" id="card-header-collapse-flows">
                <h4 class="mb-1">
                    <button class="btn btn-link collapsed collapsingHeaderButton" id="btn-collapse-header-flows"
                        data-toggle="collapse" data-target="#collapseFlowsBlock" aria-expanded="false"
                        aria-controls="collapseFlowsBlock"
                        title="The filters related to the properties of the waste flow itself.">
                        <i class="fa fa-chevron-down pull-right"></i>
                        Flows
                    </button>
                </h4>
            </div>

            <div id="collapseFlowsBlock" class="collapse" aria-labelledby="card-header-collapse-flows"
                data-parent="#filterBlock">
                <div class="card-body">

                    <h5 class="flowFilterSubtitle">General</h5>

                    <div class="row">
                        <div class="col-md-10">
                            <label style="width: 450px" for="area-select-button-flows">Select the area(s) through which
                                the flows must pass:</label>

                            <div class="d-block">
                                <button id="area-select-button-flows" class="btn btn-sm btn-primary area-select-button"
                                    data-width="100%" style="width: 13em" data-area-select-block="flows">Select areas
                                </button>

                                <div class="d-inline buttonHelpiconContainer">
                                    <a class="help-icon fas fa-question-circle" data-toggle="popover"
                                        title="Select areas" data-html="true" tabindex="0"
                                        data-content="Clicking the <b>Select areas</b> button opens a dialog in which you can select one or more geographic areas.<br> The selected areas will be used to filter the waste flows based on the <b>estimated route</b> of the waste transport.">
                                    </a>
                                </div>
                            </div>

                        </div>
                    </div>
                    <div class='row' id="areaSelectionsFlows" style="display: none;">
                        <div class="col-md-4">

                            <textarea class="form-control-sm textarea-autosize selections"
                                id="areaSelectionsFlowsTextarea" style="width: 100% !important; display: inline-block"
                                type="text" readonly></textarea>
                            <button id="clear-flows-areas-button" class="btn btn-sm btn-primary clear-areas-button"
                                data-area-clear-button="flows">
                                <i class="fas fa-times"></i>
                            </button>

                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-3">

                            <label for="yearSelect">Year</label>
                            <div class="labelHelpiconContainer">
                                <a class="help-icon fas fa-question-circle" data-toggle="popover" title="Year"
                                    data-html="true" tabindex="0" data-content="Select the year in which the waste flow has been reported.<br>
                                    Upon selecting a Year, the Month filter will become available, containing the months belonging to the selection made in this filter.
                                    ">
                                </a>
                            </div>

                            <select name="flows-year-select" id="yearSelect" multiple
                                class="form-control form-control-sm selectpicker" data-live-search="true" data-size="6"
                                style="resize: vertical;">
                                <option selected value="-1">All (<%= years.count %>)</option>
                                <option data-divider="true"></option>
                                <% years.forEach(function(year){ %>
                                <option value="<%= year.id %>"><%= year.get('code') %></option>
                                <% }); %>
                            </select>
                        </div>

                        <div class="col-md-3" id="monthCol" style="display: none;">

                            <label for="monthSelect">Month</label>
                            <div class="labelHelpiconContainer">
                                <a class="help-icon fas fa-question-circle" data-toggle="popover" title="Month"
                                    data-html="true" tabindex="0"
                                    data-content="Select the month in which the waste flow has been reported.">
                                </a>
                            </div>

                            <i class="fas fa-angle-double-right filterDoubleChevron"></i>
                            <select name="flows-month-select" id="monthSelect" multiple
                                class="form-control form-control-sm selectpicker" data-live-search="true" data-size="6"
                                style="resize: vertical;">
                            </select>
                        </div>
                    </div>

                    <h5 class="flowFilterSubtitle">European Waste Catalogue Codes</h5>

                    <div class="row">
                        <div class="col-md-3">
                            <label for="flows-hazardous-select">Hazardous</label>
                            <div class="labelHelpiconContainer">
                                <a class="help-icon fas fa-question-circle" data-toggle="popover" title="Hazardous"
                                    data-html="true" tabindex="0" data-content="<span>The European Waste Catalogue (EWC) Code of a waste flow contains an asterisk (*) to indicate whether the waste is considered to be hazardous.
                                    This filter allows you to include or exclude flows containing hazardous materials. By default, this filter ignores this property and returns both options.</span>
                                    <span>The full list of EWC Entries, including the hazardous entries, can be consulted <a href='https://eur-lex.europa.eu/legal-content/EN/TXT/HTML/?uri=CELEX:52018XC0409(01)&from=EN#d1e749-21-1-table'>here</a></span>
                                    ">
                                </a>
                            </div>
                            <select name="flows-hazardous-select" id="flows-hazardous-select"
                                class="form-control form-control-sm selectpicker">
                                <option value='both'>Ignore</option>
                                <option value='no'>Not hazardous</option>
                                <option value='yes'>Hazardous</option>
                            </select>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-3" id="wastes02col">

                            <label for="flows-waste02-select">Chapter</label>
                            <div class="labelHelpiconContainer">
                                <a class="help-icon fas fa-question-circle" data-toggle="popover" title="EWC Chapter"
                                    data-html="true" tabindex="0" data-content="<span>Filter the waste flows by the European Waste Catalogue (EWC) code, also known as Euralcode.
                                    EWC-codes exist in three levels: Chapters, Sub-Chapters, and Entries.</span>
                                    <br>
                                    <span>The full list of entries can be consulted <a href='https://eur-lex.europa.eu/legal-content/EN/TXT/HTML/?uri=CELEX:52018XC0409(01)&from=EN#d1e749-21-1-table'>here</a>.</span>
                                    <br>
                                    <span>Upon selecting an EWC Chapter, the Sub-Chapter filter will become available, containing the Sub-Chapters belonging to the selection made in this filter.</span>
                                    ">
                                </a>
                            </div>

                            <select name="flows-waste02-select" id="flows-waste02-select" multiple
                                class="form-control form-control-sm selectpicker" data-live-search="true" data-size="6"
                                style="resize: vertical;">
                                <option selected value="-1">All (<%= wastes02.count %>)</option>
                                <option data-divider="true"></option>
                                <% wastes02.forEach(function(waste){ %>
                                <option value="<%= waste.id %>"><%= waste.get('ewc_code') %>
                                    <%= waste.get('ewc_name')[0].toUpperCase() + waste.get('ewc_name').slice(1).toLowerCase() %>
                                </option>
                                <% }); %>
                            </select>
                        </div>

                        <div class="col-md-3" id="wastes04col" style="display: none;">

                            <label for="flows-waste04-select">Sub-Chapter</label>
                            <div class="labelHelpiconContainer">
                                <a class="help-icon fas fa-question-circle" data-toggle="popover"
                                    title="EWC Sub-Chapter" data-html="true" tabindex="0" data-content="<span>Filter the waste flows by the European Waste Catalogue (EWC) code, also known as Euralcode.
                                    EWC-codes exist in three levels: Chapters, Sub-Chapters, and Entries.</span>
                                    <br>
                                    <span>The full list of entries can be consulted <a href='https://eur-lex.europa.eu/legal-content/EN/TXT/HTML/?uri=CELEX:52018XC0409(01)&from=EN#d1e749-21-1-table'>here</a>.</span>
                                    <br>
                                    <span>Upon selecting an EWC Sub-Chapter, the EWC Entry filter will become available, containing the EWC Entries belonging to the selection made in this filter.</span>
                                    ">
                                </a>
                            </div>

                            <i class="fas fa-angle-double-right filterDoubleChevron"></i>
                            <select name="flows-waste04-select" id="flows-waste04-select" multiple
                                class="form-control form-control-sm selectpicker" data-live-search="true" data-size="6"
                                style="resize: vertical;">
                            </select>
                        </div>

                        <div class="col-md-3" id="wastes06col" style="display: none;">

                            <label for="flows-waste06-select" id="flows-waste06-label">EWC Entry</label>
                            <div class="labelHelpiconContainer" id="helpiconWaste06">
                                <a class="help-icon fas fa-question-circle" data-toggle="popover" title="EWC Entry"
                                    data-html="true" tabindex="0" data-content="<span>Filter the waste flows by the European Waste Catalogue (EWC) code, also known as Euralcode.
                                    EWC-codes exist in three levels: Chapters, Sub-Chapters, and Entries.</span>
                                    <br>
                                    <span>The full list of entries can be consulted <a href='https://eur-lex.europa.eu/legal-content/EN/TXT/HTML/?uri=CELEX:52018XC0409(01)&from=EN#d1e749-21-1-table'>here</a>.</span>
                                    ">
                                </a>
                            </div>

                            <i class="fas fa-angle-double-right filterDoubleChevron chevronEwc06"></i>
                            <select name="flows-waste06-select" id="flows-waste06-select" multiple
                                class="form-control form-control-sm selectpicker" data-live-search="true" data-size="6"
                                style="resize: vertical;">
                            </select>
                        </div>
                    </div>

                    <h5 class="flowFilterSubtitle">Contents</h5>
                    <div class="row">
                        <div class="col-md-3">
                            <label for="flows-material-select">Materials</label>
                            <div class="labelHelpiconContainer">
                                <a class="help-icon fas fa-question-circle" data-toggle="popover" title="Materials"
                                    data-html="true" tabindex="0" data-content="Filter the flows based on their material content. 
                                    Selecting one or more materials will return all flows containing the selected material(s), 
                                    meaning that selecting ‘sand’ will return all flows containing only sand, as well as flows 
                                    consisting of sand mixed with other materials. Use the Mixed filter on the ‘Not mixed’ setting 
                                    to only include non-mixed material flows.">
                                </a>
                            </div>
                            <select id="flows-material-select" name="flows-material-select" multiple
                                class="form-control form-control-sm selectpicker" data-live-search="true" data-size="6"
                                style="resize: vertical;">
                                <option selected value="-1">All (<%= materials.count %>)</option>
                                <option data-divider="true"></option>
                                <% materials.forEach(function(material){ %>
                                <option value="<%= material.id %>"><%= material.get('name')[0].toUpperCase() +
                                    material.get('name').slice(1) %>
                                </option>
                                <% }); %>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label>Products</label>
                            <div class="labelHelpiconContainer">
                                <a class="help-icon fas fa-question-circle" data-toggle="popover" title="Products"
                                    data-html="true" tabindex="0" data-content="The Products filter allows for the filtering of materials 
                                    which are considered directly reusable.">
                                </a>
                            </div>
                            <select name="flows-product-select" multiple
                                class="form-control form-control-sm selectpicker" data-live-search="true" data-size="6"
                                style="resize: vertical;">
                                <option selected value="-1">All (<%= products.count %>)</option>
                                <option data-divider="true"></option>
                                <% products.forEach(function(product){ %>
                                <option value="<%= product.id %>">
                                    <%= product.get('name')[0].toUpperCase() + product.get('name').slice(1) %></option>
                                <% }); %>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label>Composites</label>
                            <div class="labelHelpiconContainer">
                                <a class="help-icon fas fa-question-circle" data-toggle="popover" title="Composites"
                                    data-html="true" tabindex="0" data-content="The Composites filter allows for the filtering of 
                                    waste flows consisting of more than two materials that are not directly usable. These flows 
                                    will require an additional processing step in order to separate the individual materials 
                                    making up the composite.">
                                </a>
                            </div>
                            <select name="flows-composites-select" multiple
                                class="form-control form-control-sm selectpicker" data-live-search="true" data-size="6"
                                style="resize: vertical;">
                                <option selected value="-1">All (<%= composites.count %>)</option>
                                <option data-divider="true"></option>
                                <% composites.forEach(function(composite){ %>
                                <option value="<%= composite.id %>">
                                    <%= composite.get('name')[0].toUpperCase() + composite.get('name').slice(1) %>
                                </option>
                                <% }); %>
                            </select>
                        </div>
                    </div>

                    <h5 class="flowFilterSubtitle">Characteristics</h5>
                    <div class="row">
                        <div class="col-md-3">
                            <label for="flows-clean-select">Clean</label>
                            <div class="labelHelpiconContainer">
                                <a class="help-icon fas fa-question-circle" data-toggle="popover" title="Clean"
                                    data-html="true" tabindex="0"
                                    data-content="The Clean filter indicates the extent to which a 
                                    flow is expected to be contaminated with another substance. ‘Mono’ streams are considered 
                                    clean streams since they consist of one material and are not contaminated, i.e. clean.">
                                </a>
                            </div>
                            <select id="flows-clean-select" name="flows-clean-select"
                                class="form-control form-control-sm selectpicker" multiple style="resize: vertical;">
                                <option selected value='-1'>Ignore</option>
                                <option data-divider="true"></option>
                                <option value='unknown'>Unknown</option>
                                <option value='no'>Not clean</option>
                                <option value='yes'>Clean</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label for="flows-mixed-select">Mixed</label>
                            <div class="labelHelpiconContainer">
                                <a class="help-icon fas fa-question-circle" data-toggle="popover" title="Mixed"
                                    data-html="true" tabindex="0" data-content="The Mixed category indicates whether the flow 
                                    contains two or more materials. A mixed flow could consist of two or more clean materials 
                                    (masonry and concrete rubble, f.e.), but also two materials of which one is an identified 
                                    pollutant (soil containing mineral oil, f.e.). All non-clean flows are by definition mixed, 
                                    indicating they contain two or more materials.">
                                </a>
                            </div>
                            <select id="flows-mixed-select" name="flows-mixed-select"
                                class="form-control form-control-sm selectpicker" multiple style="resize: vertical;">
                                <option selected value='-1'>Ignore</option>
                                <option data-divider="true"></option>
                                <option value='unknown'>Unknown</option>
                                <option value='no'>Not mixed</option>
                                <option value='yes'>Mixed</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label for="flows-direct-select">Direct use</label>
                            <div class="labelHelpiconContainer">
                                <a class="help-icon fas fa-question-circle" data-toggle="popover" title="Direct use"
                                    data-html="true" tabindex="0" data-content="The Direct use filter indicates whether 
                                    a flow is (expected to be) directly reusable in its current form and no additional 
                                    processing is required. ">
                                </a>
                            </div>
                            <select id="flows-direct-select" name="flows-direct-select"
                                class="form-control form-control-sm selectpicker" multiple style="resize: vertical;">
                                <option selected value='-1'>Ignore</option>
                                <option data-divider="true"></option>
                                <option value='unknown'>Unknown</option>
                                <option value='no'>Not direct</option>
                                <option value='yes'>Direct</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label for="flows-iscomposite-select">Composite</label>
                            <div class="labelHelpiconContainer">
                                <a class="help-icon fas fa-question-circle" data-toggle="popover" title="Composite"
                                    data-html="true" tabindex="0" data-content="The Composite filter indicates whether a flow contains a 
                                    known composite consisting of two or more materials.">
                                </a>
                            </div>
                            <select id="flows-iscomposite-select" name="flows-iscomposite-select"
                                class="form-control form-control-sm selectpicker" multiple style="resize: vertical;">
                                <option selected value='-1'>Ignore</option>
                                <option data-divider="true"></option>
                                <option value='unknown'>Unknown</option>
                                <option value='no'>Product</option>
                                <option value='yes'>Composite</option>
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3">
                            <label for="flows-route-select">Route</label>
                            <div class="labelHelpiconContainer">
                                <a class="help-icon fas fa-question-circle" data-toggle="popover" title="Route"
                                    data-html="true" tabindex="0" data-content="The Route property indicates whether a waste collection company has collected the same type of waste
                                        from multiple different producers of waste. During the waste collection process, the waste from 
                                        all sources is combined.
                                        <br>
                                        An example would be municipal waste collection in which the waste from every building is collected by a truck.                                        
                                    ">
                                </a>
                            </div>
                            <select name="flows-route-select" id="flows-route-select"
                                class="form-control form-control-sm selectpicker">
                                <option value='both'>Ignore</option>
                                <option value='no'>Not route</option>
                                <option value='yes'>Route</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label for="flows-collector-select">Collector</label>
                            <div class="labelHelpiconContainer">
                                <a class="help-icon fas fa-question-circle" data-toggle="popover" title="Collector"
                                    data-html="true" tabindex="0" data-content="<span>The Collector property indicates whether 
                                        a waste collection company has collected the same type of waste from different sources.
                                        In this case, the waste from the different sources has not been combined, 
                                        and may only consist of certain types of waste, which can be consulted 
                                        <a href='https://www.lma.nl/publish/pages/105041/5-bijlage-a-van-de-regeling2.pdf'>here</a>.</span>
                                    ">
                                </a>
                            </div>
                            <select name="flows-collector-select" id="flows-collector-select"
                                class="form-control form-control-sm selectpicker">
                                <option value='both'>Ignore</option>
                                <option value='no'>Not collector</option>
                                <option value='yes'>Collector</option>
                            </select>
                        </div>
                    </div>


                </div>
            </div>

        </div>

        <div class="row mt-1">
            <button id='reset-filters' class="btn btn-secondary resetButton" title="Reset all the filters">RESET
            </button>
        </div>

    </div>


    <!--Area selection-->
    <div class="area-filter modal fade" role="dialog"></div>

    <!-- Saved filter modal-->
    <div class="saved-filters modal fade" role="dialog"></div>
</script>

<!-- Saved filter modal-->
<script type="text/template" id="saved-filters-modal-template">
    <div class="modal-dialog modal-lg" style="max-width: 500px">
        <!-- Modal content-->
        <div class="modal-content col-md-12 pt-1">
            <div class="modal-header pt-2 pb-1">
                <h4 class="modal-title savedMode">Saved filters</h4>
                <h4 class="modal-title newMode">Save this set of filters</h4>
                <button type="button" class="close" data-dismiss="modal"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">

                <form class="newMode needs-validation" novalidate>
                    <div class='row pt-4 pb-2'>
                        <div class="col d-flex">
                            <div class="form-group w-100">
                                <input 
                                    type="text"
                                    id="new-filter-name-input"
                                    class="form-control-sm w-100 pl-3"
                                    title="The name of the new saved filter configuration."
                                    placeholder="New filter name"
                                    style="height: 38px; border: none;" 
                                    maxlength="255"
                                    required>
                                <div class="invalid-feedback w-100 text-center mt-4">Please fill in a filter name.</div>
                                <small id="newFilterAdded" class="form-text text-white w-100 text-center mt-4" style="display: none;">New filter has been saved!</small>
                            </div>             
                            <button
                                id='new-filter-name-btn'
                                class="btn btn-primary"
                                type="submit"
                                title="Save the filter name"
                                style="width: 6.65rem; height: 38px; margin-left: 4px;"
                                >Save</button>
                        </div>                        
                    </div>
                </form>
                
                <form class="savedMode needs-validation" novalidate>
                    
                    <div class='row pt-3 savedMode'>
                        <div class="col">
                            <select name="saved-filters-select"
                                    id="saved-filters-select"
                                    class="form-control selectpicker"
                                    style="max-width: 350px;"
                                    data-none-selected-text="No saved filters found.">
                                    <% savedFilters.forEach(function(savedFilter) { %>
                                            <option value="<%= savedFilter.id %>"><%= savedFilter.get('name') %></option>
                                    <% }) %>
                            </select>
                        </div>
                    </div>
                    
                    <div class='row pt-2 pb-2 savedMode'>
                        <div class="col d-flex justify-content-between">
                            <button id='delete-filter-config' class="btn btn-sm btn-secondary w-25" title="Delete the selected filter configuration.">Delete</button>
                            <button id='edit-filter-name' class="btn btn-sm btn-secondary w-25" title="Edit the name of the selected filter configuration.">Edit</button>
                            <button id='update-filter-config' class="btn btn-sm btn-secondary w-25" title="Update this filter with the current filter configuration.">Update</button>
                            <button id='load-filter-config' class="btn btn-sm btn-primary w-25" title="Load the selected filter configuration.">Load</button>
                        </div>
                    </div>
    
                    <div class='row pt-4 pb-2 mb-4 filterEdit' style="display: none;">
                        <div class="col d-flex">

                            <div class="form-group w-100">
                                <input type="text" class="form-control-sm w-100" maxlength="255" id="update-filter-name" placeholder="Filter name" style="height: 38px; border: none; padding-left: 1rem;" required>
                                <div class="invalid-feedback w-100 text-center mt-4">Please fill in a filter name.</div>
                                <small id="filterNameUpdated" class="form-text text-white w-100 text-center mt-4" style="display: none;">Filter name has been updated!</small>
                            </div>

                            <button id='save-filter-name'
                                    type="submit"
                                    class="btn btn-primary"
                                    style="width: 6.65rem; height: 38px; margin-left: 4px;"
                                    title="Save the filter name">Save</button>
                        </div>
                    </div>
                </form>


            </div>
            <div class="modal-footer">
                <button type="button" class="btn cancel btn-secondary savedMode" data-dismiss="modal">Cancel</button>
                <button class="btn btn-primary confirm" data-dismiss="modal" aria-hidden="true">OK</button>
            </div>
        </div>
    </div>
</script>

<!--Area selection-->
<script type="text/template" id="area-select-modal-template">
    <div class="modal-dialog modal-lg">
        <!-- Modal content-->
        <div class="modal-content col-md-12 pt-1">
            <div class="modal-header pt-2 pb-1">
                <h4 class="modal-title">Select areas</h4>
                <button type="button" class="close" data-dismiss="modal"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <div class='row pt-1'>
                    <div class="col">
                        <label for="area-level-select" class="input-label">Geographic level:</label>
                        <select name="area-level-select" id="area-level-select" class="form-control form-control-sm selectpicker" style="max-width: 350px;">
                            <% levels.forEach(function(level) { %>
                                <% if (level.get('level') != "1000") %>
                                    <option value="<%= level.id %>"><%= level.get('name') %></option>
                            <% }) %>
                        </select>
                    </div>
                </div>
                <div class='row'>
                    <div class='areaModalMapRow map'></div>
                </div>
                <div class='row pt-0'>
                    <div class="col">
                        <label for="areaSelectionsModalTextarea">Selected areas:</label>
                        <textarea class="form-control-sm textarea-autosize selections" id="areaSelectionsModalTextarea" style="width: 100%" type="text" readonly></textarea>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <!-- <button type="button" class="btn cancel btn-secondary" data-dismiss="modal">Cancel</button> -->
                <button class="btn btn-primary confirm" data-dismiss="modal" aria-hidden="true">OK</button>
            </div>
        </div>
    </div>
</script>